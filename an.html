<!DOCTYPE html>
<html lang="id" class="scroll-smooth" data-theme="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ProfitMart ‚Äî Marketplace Gen-Z 2025 + Video Produk</title>
  <meta name="description" content="Belanja dengan video review produk ‚Äî langsung lihat sebelum beli!" />

  <!-- Tailwind CSS CDN (paling stabil) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          fontFamily: { pop: ['Poppins', 'sans-serif'], fred: ['Fredoka One', 'cursive'] },
          colors: { primary: '#0EA5E9', accent: '#10B981', danger: '#EF4444' }
        }
      }
    }
  </script>

  <!-- Font Awesome & Confetti -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>

  <style>
    .line-clamp-2 { display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
  </style>
</head>

<body class="bg-gray-50 text-gray-800 dark:bg-slate-900 dark:text-gray-100 transition-all duration-500 font-pop">

  <!-- HEADER -->
  <header class="sticky top-0 z-50 bg-white dark:bg-slate-800 shadow-lg">
    <div class="max-w-7xl mx-auto px-4 py-4 flex flex-wrap items-center justify-between gap-4">
      <h1 class="text-3xl font-bold text-primary font-fred">ProfitMart</h1>
      
      <div class="flex-1 max-w-xl mx-4">
        <div class="relative">
          <input type="text" id="searchInput" placeholder="Cari produk..." 
                 class="w-full px-5 py-3 pl-12 rounded-full border border-gray-300 dark:border-gray-600 dark:bg-slate-700 focus:outline-none focus:ring-4 focus:ring-primary/30">
          <i class="fas fa-search absolute left-4 top-4 text-gray-400"></i>
        </div>
      </div>

      <div class="flex items-center gap-6">
        <button id="themeToggle" class="text-2xl hover:scale-110 transition"><i class="fas fa-moon"></i></button>
        <button onclick="toggleCart()" class="relative text-2xl hover:scale-110 transition">
          <i class="fas fa-shopping-cart"></i>
          <span id="cartCount" class="absolute -top-3 -right-3 bg-danger text-white text-xs rounded-full w-6 h-6 flex items-center justify-center font-bold animate-pulse">0</span>
        </button>
      </div>
    </div>
  </header>

  <!-- HERO -->
  <section class="bg-gradient-to-br from-primary to-blue-600 text-white py-24 text-center">
    <div class="max-w-4xl mx-auto px-4">
      <h2 class="text-5xl md:text-7xl font-bold mb-6">ProfitMart</h2>
      <p class="text-xl md:text-2xl opacity-90">Belanja apapun, lihat video produknya dulu, langsung checkout via WA!</p>
    </div>
  </section>

  <!-- KATEGORI FILTER -->
  <section class="max-w-7xl mx-auto px-4 py-12">
    <h2 class="text-4xl font-bold text-center mb-10 text-primary">Kategori Produk</h2>
    <div class="flex flex-wrap justify-center gap-4 mb-12">
      <button onclick="filterCategory('')" class="px-8 py-3 bg-primary text-white rounded-full font-semibold hover:bg-blue-700 transition">Semua</button>
      <button onclick="filterCategory('cemilan')" class="px-8 py-3 bg-gray-200 dark:bg-gray-700 rounded-full hover:bg-primary hover:text-white transition">Cemilan</button>
      <button onclick="filterCategory('fashion')" class="px-8 py-3 bg-gray-200 dark:bg-gray-700 rounded-full hover:bg-primary hover:text-white transition">Fashion</button>
      <button onclick="filterCategory('gadget')" class="px-8 py-3 bg-gray-200 dark:bg-gray-700 rounded-full hover:bg-primary hover:text-white transition">Gadget</button>
      <button onclick="filterCategory('sembako')" class="px-8 py-3 bg-gray-200 dark:bg-gray-700 rounded-full hover:bg-primary hover:text-white transition">Sembako</button>
    </div>

    <!-- GRID PRODUK -->
    <div id="productGrid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8">
      <!-- Produk diisi oleh JavaScript -->
    </div>
  </section>

  <!-- MODAL VIDEO PLAYER -->
  <div id="videoModal" class="fixed inset-0 bg-black/95 z-[9999] hidden flex items-center justify-center p-4" onclick="closeVideo()">
    <div class="relative max-w-5xl w-full" onclick="event.stopPropagation()">
      <button class="absolute -top-12 right-0 text-white text-5xl hover:text-danger transition z-10" onclick="closeVideo()">
        <i class="fas fa-times"></i>
      </button>
      <div class="bg-black rounded-2xl overflow-hidden shadow-2xl">
        <iframe id="videoFrame" class="w-full h-96 md:h-screen max-h-screen" src="" frameborder="0" allow="autoplay; fullscreen; picture-in-picture" allowfullscreen></iframe>
      </div>
    </div>
  </div>

  <!-- KERANJANG SIDEBAR -->
  <div id="cartSidebar" class="fixed inset-0 z-50 bg-black/50 hidden" onclick="if(event.target===this) toggleCart()">
    <div id="cartPanel" class="absolute right-0 top-0 h-full w-full max-w-md bg-white dark:bg-slate-800 shadow-2xl transform translate-x-full transition-transform duration-500 overflow-y-auto">
      <div class="p-6 border-b dark:border-gray-700 flex justify-between items-center">
        <h3 class="text-2xl font-bold">Keranjang (<span id="cartTotalItems">0</span>)</h3>
        <button onclick="toggleCart()" class="text-3xl hover:text-danger transition"><i class="fas fa-times"></i></button>
      </div>

      <div id="cartItems" class="p-6 space-y-4">
        <p class="text-center text-gray-500 py-20">Keranjang kosong üò¢</p>
      </div>

      <div class="p-6 border-t dark:border-gray-700">
        <div class="flex justify-between text-2xl font-bold mb-6 text-primary">
          <span>Total</span>
          <span>Rp <span id="cartTotalPrice">0</span></span>
        </div>
        <button onclick="checkout()" class="w-full py-5 bg-accent text-white text-xl font-bold rounded-xl hover:bg-green-600 transition flex items-center justify-center gap-3">
          <i class="fab fa-whatsapp text-3xl"></i> Checkout via WhatsApp
        </button>
      </div>
    </div>
  </div>

  <!-- TOAST NOTIFIKASI -->
  <div id="toast" class="fixed bottom-8 left-1/2 -translate-x-1/2 bg-accent text-white px-8 py-4 rounded-full shadow-2xl opacity-0 transition-all z-50 text-lg font-bold pointer-events-none">
    Ditambahkan ke keranjang! üéâ
  </div>

  <!-- DATA PRODUK + VIDEO -->
  <script>
    const products = [
      { id: 1, name: "Risoles Lumer Mozzarella", price: 18000, category: "cemilan", rating: 4.9, sold: 532, img: "https://images.unsplash.com/photo-1606890658317-7ff038f79e73?w=500", video: "https://www.youtube.com/embed/5o5k6vZ1lBu" },
      { id: 2, name: "Kaos Oversize Cotton Combed", price: 89000, category: "fashion", rating: 4.8, sold: 1200, img: "https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?w=500", video: "https://www.instagram.com/reel/CzXyz123abc/embed" },
      { id: 3, name: "Powerbank 20000mAh Fast Charging", price: 189000, category: "gadget", rating: 4.7, sold: 892, img: "https://images.unsplash.com/photo-1609099658540-15e4c2c6f7c7?w=500", video: "https://www.tiktok.com/embed/v2/729847562312345" },
      { id: 4, name: "Beras Premium 5kg", price: 68000, category: "sembako", rating: 5.0, sold: 2100, img: "https://images.unsplash.com/photo-1586201375761-83865001bdd6?w=500" },
      { id: 5, name: "Keripik Balado Level 20", price: 15000, category: "cemilan", rating: 4.9, sold: 3400, img: "https://images.unsplash.com/photo-1624353365286-3b689189b3f3?w=500", video: "https://www.youtube.com/embed/dQw4w9WgXcQ" },
      { id: 6, name: "Hoodie Zipper Korean Style", price: 179000, category: "fashion", rating: 4.9, sold: 780, img: "https://images.unsplash.com/photo-1556821845-9c6e4d1c27c1?w=500" },
      { id: 7, name: "Earphone TWS Bluetooth 5.3", price: 249000, category: "gadget", rating: 4.8, sold: 1500, img: "https://images.unsplash.com/photo-1606220588913-b4747d92b5db?w=500", video: "https://www.youtube.com/embed/9bZkp7q19f0" },
      { id: 8, name: "Minyak Goreng 2 Liter", price: 35000, category: "sembako", rating: 4.7, sold: 3200, img: "https://images.unsplash.com/photo-1621939514643-280e5c90473c?w=500" },
      { id: 9, name: "Paket Snack Box Lebaran", price: 129000, category: "cemilan", rating: 5.0, sold: 890, img: "https://images.unsplash.com/photo-1606890658317-7ff038f79e73?w=500", video: "https://www.youtube.com/embed/abc123xyz" },
    ];

    let cart = JSON.parse(localStorage.getItem('profitmart_cart')) || [];
    const waNumber = "6281234567890"; // ‚Üê GANTI DENGAN NOMOR WA KAMU!

    // Render semua produk
    function render(productsToShow) {
      const grid = document.getElementById('productGrid');
      if (!productsToShow.length) {
        grid.innerHTML = `<p class="col-span-full text-center text-2xl text-gray-500 py-20">Produk tidak ditemukan üòî</p>`;
        return;
      }
      grid.innerHTML = productsToShow.map(p => `
        <div class="bg-white dark:bg-slate-800 rounded-2xl shadow-lg overflow-hidden hover:shadow-2xl transition-all duration-  group relative ${p.video ? 'cursor-pointer' : ''}"
             ${p.video ? `onclick="openVideo('${p.video}')"` : ''}>
          
          ${p.video ? `<div class="absolute top-3 right-3 bg-black/70 text-white p-3 rounded-full z-10 shadow-lg">
            <i class="fas fa-play text-xl"></i>
          </div>` : ''}

          <div class="absolute top-3 left-3 bg-danger text-white px-3 py-1 rounded-full text-xs font-bold z-10">Terlaris</div>
          
          <img src="${p.img}" alt="${p.name}" class="w-full h-64 object-cover group-hover:scale-110 transition duration-500">
          
          <div class="p-5">
            <h3 class="font-bold text-lg mb-2 line-clamp-2">${p.name}</h3>
            <div class="flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400 mb-3">
              <span class="text-yellow-500">‚òÖ ${p.rating}</span>
              <span>‚Ä¢ Terjual ${p.sold}+</span>
            </div>
            <div class="flex items-center justify-between">
              <span class="text-2xl font-bold text-primary">Rp ${p.price.toLocaleString('id-ID')}</span>
              <button onclick="addToCart(${p.id}); event.stopPropagation();" class="bg-primary text-white p-4 rounded-full hover:bg-blue-700 transition shadow-lg hover:scale-110">
                <i class="fas fa-plus"></i>
              </button>
            </div>
          </div>
        </div>
      `).join('');
    }

    function openVideo(url) {
      document.getElementById('videoModal').classList.remove('hidden');
      document.getElementById('videoFrame').src = url + (url.includes('youtube') ? '?autoplay=1' : '');
      document.body.style.overflow = 'hidden';
    }

    function closeVideo() {
      document.getElementById('videoModal').classList.add('hidden');
      document.getElementById('videoFrame').src = "";
      document.body.style.overflow = 'auto';
    }

    function addToCart(id) {
      event.stopPropagation();
      const product = products.find(p => p.id === id);
      const existing = cart.find(i => i.id === id);
      if (existing) existing.qty++;
      else cart.push({ ...product, qty: 1 });
      localStorage.setItem('profitmart_cart', JSON.stringify(cart));
      updateCart();
      showToast(`${product.name} ditambahkan! üéâ`);
      confetti({ particleCount: 120, spread: 70, origin: { y: 0.6 } });
    }

    function updateCart() {
      const totalItems = cart.reduce((a, i) => a + i.qty, 0);
      const totalPrice = cart.reduce((a, i) => a + i.price * i.qty, 0);
      document.getElementById('cartCount').textContent = totalItems || '0';
      document.getElementById('cartTotalItems').textContent = totalItems;
      document.getElementById('cartTotalPrice').textContent = totalPrice.toLocaleString('id-ID');

      document.getElementById('cartItems').innerHTML = cart.length ? cart.map(i => `
        <div class="flex gap-4 bg-gray-50 dark:bg-slate-700 p-4 rounded-xl">
          <img src="${i.img}" class="w-20 h-20 object-cover rounded-lg">
          <div class="flex-1">
            <h4 class="font-semibold text-sm line-clamp-2">${i.name}</h4>
            <p class="text-primary font-bold">Rp ${(i.price * i.qty).toLocaleString('id-ID')}</p>
            <div class="flex items-center gap-3 mt-2">
              <button onclick="changeQty(${i.id}, -1)" class="w-9 h-9 rounded-full border hover:bg-gray-200">-</button>
              <span class="font-bold w-8 text-center">${i.qty}</span>
              <button onclick="changeQty(${i.id}, 1)" class="w-9 h-9 rounded-full bg-primary text-white hover:bg-blue-700">+</button>
            </div>
          </div>
          <button onclick="removeFromCart(${i.id})" class="text-danger hover:scale-110"><i class="fas fa-trash"></i></button>
        </div>
      `).join('') : '<p class="text-center text-gray-500 py-20">Keranjang kosong üò¢</p>';
    }

    function changeQty(id, delta) {
      const item = cart.find(i => i.id === id);
      if (item) {
        item.qty += delta;
        if (item.qty <= 0) removeFromCart(id);
        else {
          localStorage.setItem('profitmart_cart', JSON.stringify(cart));
          updateCart();
        }
      }
    }

    function removeFromCart(id) {
      cart = cart.filter(i => i.id !== id);
      localStorage.setItem('profitmart_cart', JSON.stringify(cart));
      updateCart();
      showToast("Produk dihapus dari keranjang");
    }

    function toggleCart() {
      document.getElementById('cartSidebar').classList.toggle('hidden');
      document.getElementById('cartPanel').classList.toggle('translate-x-full');
    }

    function checkout() {
      if (!cart.length) return showToast("Keranjang kosong!");
      let msg = "*Pesanan dari ProfitMart*%0a%0a";
      cart.forEach(i => msg += `‚Ä¢ ${i.name} √ó ${i.qty} = Rp ${(i.price*i.qty).toLocaleString('id-ID')}%0a`);
      msg += `%0a*Total: Rp ${cart.reduce((a,i)=>a+(i.price*i.qty),0).toLocaleString('id-ID')}*%0aTerima kasih sudah belanja! üöÄ`;
      window.open(`https://wa.me/${waNumber}?text=${msg}`, '_blank');
      confetti({ particleCount: 400, spread: 120 });
    }

    function showToast(text) {
      const t = document.getElementById('toast');
      t.textContent = text;
      t.classList.remove('opacity-0');
      setTimeout(() => t.classList.add('opacity-0'), 3000);
    }

    function filterCategory(cat) {
      const filtered = cat ? products.filter(p => p.category === cat) : products;
      render(filtered);
    }

    document.getElementById('searchInput').addEventListener('input', function() {
      const query = this.value.toLowerCase().trim();
      const filtered = products.filter(p => p.name.toLowerCase().includes(query));
      render(filtered);
    });

    // Dark mode toggle
    document.getElementById('themeToggle').addEventListener('click', () => {
      const isDark = document.documentElement.getAttribute('data-theme') === 'dark';
      document.documentElement.setAttribute('data-theme', isDark ? 'light' : 'dark');
      localStorage.setItem('theme', isDark ? 'light' : 'dark');
    });

    // Inisialisasi
    window.onload = () => {
      render(products);
      updateCart();
      if (localStorage.getItem('theme') === 'dark') document.documentElement.setAttribute('data-theme', 'dark');
    };
  </script>
</body>
</html>
